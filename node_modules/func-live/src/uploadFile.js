import fs from 'fs'
import FormData from 'form-data'
import axios from 'axios'
import { API_URL } from './config.js'
import path from 'path'

export const uploadFile = async({ input }) => {
  const file = await fs.promises.readFile(input)
  const filename = path.basename(input)

  const form = new FormData()
  form.append('file',file,filename)

  const response = await axios.post(`${API_URL}/upload-file`,form,{ headers: { ...form.getHeaders() } })

  return response.data.url
}

// uploadFile({ input: '/Users/andreaskater/Downloads/npm-logo.png' }).then(console.log)
